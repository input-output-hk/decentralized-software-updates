\documentclass[11pt,a4paper]{article}
\usepackage[utf8]{inputenc}
\usepackage[margin=2.5cm]{geometry}

\usepackage{microtype}
\usepackage{mathpazo} % nice fonts
\usepackage{xcolor}
\usepackage[unicode=true,pdftex,pdfa,colorlinks=true]{hyperref}

\begin{document}

\hypersetup{
  pdftitle={Design specification of the Priviledge update mechanism},
  breaklinks=true,
  linkcolor={blue},
  citecolor={blue},
  urlcolor={blue},
  linkbordercolor={white},
  citebordercolor={white},
  urlbordercolor={white}
}

\title{
  Design specification of the Priviledge update mechanism\\
}

\author{
  Nikos Karagiannidis\\
  {\small \texttt{nikos.Karagiannidis@iohk.io}}\\
  \and
  Damian Nadales \\
  {\small \texttt{damian.nadales@iohk.io}}\\
  % TODO: add more authors if deemed appropriate.
}

\date{\today}

\maketitle

\begin{abstract}

\end{abstract}

\tableofcontents
\listoffigures
\listoftables

\section{Purpose}
\label{sec:purpose}

% What is the purpose of this document?
This document presents the design of a decentralized governance mechanism for
updating public blockchain systems.
% What is governance.
In this context, governance refers to the set of rules by which the blockchain
evolves.
% When is governance decentralized?
We say that governance is decentralized when the community can leverage on these
rules to determine the direction in which this blockchain evolves.

% TODO: should we mention here (or somewhere) how governance and the lifecycle of
% an update are related? We also need to define what an update is.

% Why people should care about the problems stated in this document?
A decentralized update mechanism is crucial for achieving a decentralized
blockchain.

% Why people should care about this document? What is the target audience?
This document is intended for stakeholders interested in the implementation of a
decentralized update system for blockchains.

% What does this document contains
This document features a breakdown of the requirements for achieving
decentralization of the update mechanism in a blockchain, and describes a design
that satisfies these requirements.

% Who funded this work?
The work presented here was funded by the PRIViLEDGE project~\cite{priviledge}.

% Scope of this work
The topic of decentralized blockchain governance is difficult and vast.
%
Therefore we identify important problems that were not solved within this
project, but at the same time, we show how the design described here can
accommodate any potential solutions to these problems.

% TODO: mention Voltaire, and how this document relates to it.

\section{Requirements}
\label{sec:requirements}
% FROM: 2 Requirements for a decentralized software update system

This section presents the requirements for achieving decentralized governance of
a blockchain.

\subsection{Open}
\label{sec:open-participation}

\subsection{Democratic}
\label{sec:decentr-decis-making}

\subsection{Protocol driven}
\label{sec:protocol-driven}

\subsection{Transparent and auditable}
\label{sec:transp-audit}

\subsection{Secure}
\label{sec:secure}

\subsection{Performant and scalable}
\label{sec:performant-scalable}

\subsection{Metadata-driven}
\label{sec:metadata-driven}

\subsection{Consistent}
\label{sec:cons-update-logic}


\section{Design}
\label{sec:design}

% Hmmm, I'm thinking if we need to say something about the blockchain
% architecture we assume: for instance, we assume that we have a ledger
% components that will execute the update protocol somehow.

\subsection{Update types}
\label{sec:update-types}

% What is an update? How are updates related to the blockchain evolution and/or
% how are they related to governance.

% What aspects of a blockchain are we updating?

\subsection{The lifecycle of a decentralized update}
\label{sec:phases-an-update}
% FROM 3 The lifecycle of a decentralized software update

% Why do we need to have a governance system that captures the whole life cycle
% of an update? So for instance, why not supporting update activations only?

\subsection{Voting and delegation}
\label{sec:voting-delegation}
% FROM 4 Update governance

\subsubsection{Delegation}
\label{sec:delegation}

% When we describe how votes are counted we need to talk about delegation. Hence
% we must first talk about what delegation is.

\subsubsection{Voting}
\label{sec:voting}

% Describe how votes are counted.

\subsection{Threshold analysis}
\label{sec:threshold-analysis}
% FROM 6 Threshold analysis

\subsection{Ideation}
\label{sec:ideation}

\subsection{Implementation}
\label{sec:implementation}

\subsection{Approval}
\label{sec:approval}

\subsection{Activation}
\label{sec:activation}

% This seems like the right place to cite the Esorics paper. When we talk about
% the "enactment" process, we should mention what are the possible solutions. We
% should also mention the hard-fork combinator.

\subsection{Performance analysis}
\label{sec:performance-analysis}
% FROM performance considerations

\subsubsection{Impact on transaction throughput}
\label{sec:impact-trans-thro}

\subsubsection{Impact on processing time}
\label{sec:impact-proc-time}

\subsubsection{Impact on memory consumption}
\label{sec:impact-memory-cons}

\section{Satisfying the requirements}
\label{sec:satisfy-requ}

% How does the different aspects of the design satisfies the requirements.

% It seems that here we'd want to add the same subsections as in the
% requirements section.

\section{Implementation}
\label{sec:implementation-1}

% Mention that we have an implementation of the concepts presented in this
% document, without giving much details about it. The interested reader can look
% at the code (and maybe we'll have time to document this design).
Parts of the design described in this document was implemented and integrated to Cardano,
in a separate branch.

% Which parts were not implemented?
Expert pools and delegation was not implemented in the prototype. These aspects
are orthogonal to the update logic that was implemented in the prototype, and as
such, they can be added later.

As a result of the implementation of the prototype:
\begin{itemize}
\item We developed a property testing framework, which improves upon previous
  work by IOHK.
\item We made the ledger layer of Cadano parametric on the update logic. This
  was merged onto master, and as a result it is now easier to swap Cardano's
  update mechanism.
\item We ran benchmarks on a testnet. The results we obtained from these
  benchmarks confirmed that usage is linear on the number of participants as
  predicted. On the other hand, we observed a quadratic increase in the
  transaction latency. In our benchmarks we used a very short voting period of
  10 minutes, and we reproduced the worst-case and unrealistic assumption that
  every participant would vote at the same time. Nevertheless, further analysis
  is needed for a production ready update protocol to determine if safeguard
  measures against high transaction latency are required.
\end{itemize}

% The interested reader can check: deliverables, source code. Maybe an
% implementation report.
The reader interested in the design and implementation of the prototype can
check the PRIViLEDGE deliverables~\cite{priviledge_d11, priviledge_d12,
  priviledge_d41}, as well as the implementation documentation and source
code~\cite{dsu-repo2021}.

\section{Problems not addressed}
\label{sec:probl-not-addr}

% Which problems were not addressed? Why not?

% How can the prototype accommodate potential solutions to these problems.
          % - Using different voters set or voting weights.
          % - Incentives (it's an orthogonal, we see in principle nothing to
          %   accommodate).
          % - Spam protection: have a set of allowed submitters that is checked
          %   upon proposal submission (could be at commit time or at reveal
          %   time).

        % - How this prototype can accommodate a restriction in scope:
        %   - Having less phases.

        %   - Having a committee / set of genesis keys.

\section{Conclusions}
\label{sec:conclusions}

\bibliographystyle{acm}
\bibliography{references}

\end{document}
%%% Local Variables:
%%% mode: latex
%%% TeX-master: t
%%% End:
